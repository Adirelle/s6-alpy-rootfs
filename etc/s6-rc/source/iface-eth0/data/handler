#!/bin/execlineb -S1
fdmove -c 2 1
cd data
ifelse { test -x ./on-${1} } {
	foreground { ./on-${1} }
	import -u ?
	foreground { echo "${1} result: ${?}" }

	foreground { ip addr show }
	foreground { ip route show }

	foreground {
		import -ui notification_fd
		fdmove 1 ${notification_fd}
		foreground { s6-echo done }
		fdclose 1
	}

	exit 0
}
foreground { echo "Unhandled event ${1}" }
exit 111
